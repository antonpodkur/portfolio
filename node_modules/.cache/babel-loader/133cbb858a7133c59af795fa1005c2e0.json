{"ast":null,"code":"\"use strict\";\n\nvar assign = require('object-assign');\n\nvar _require = require('@sanity/observable/operators/filter'),\n    filter = _require.filter;\n\nvar _require2 = require('@sanity/observable/operators/map'),\n    map = _require2.map;\n\nvar Patch = require('./data/patch');\n\nvar Transaction = require('./data/transaction');\n\nvar dataMethods = require('./data/dataMethods');\n\nvar DatasetsClient = require('./datasets/datasetsClient');\n\nvar ProjectsClient = require('./projects/projectsClient');\n\nvar AssetsClient = require('./assets/assetsClient');\n\nvar UsersClient = require('./users/usersClient');\n\nvar AuthClient = require('./auth/authClient');\n\nvar httpRequest = require('./http/request');\n\nvar getRequestOptions = require('./http/requestOptions');\n\nvar _require3 = require('./config'),\n    defaultConfig = _require3.defaultConfig,\n    initConfig = _require3.initConfig;\n\nvar toPromise = function toPromise(observable) {\n  return observable.toPromise();\n};\n\nfunction SanityClient() {\n  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultConfig;\n\n  if (!(this instanceof SanityClient)) {\n    return new SanityClient(config);\n  }\n\n  this.config(config);\n  this.assets = new AssetsClient(this);\n  this.datasets = new DatasetsClient(this);\n  this.projects = new ProjectsClient(this);\n  this.users = new UsersClient(this);\n  this.auth = new AuthClient(this);\n\n  if (this.clientConfig.isPromiseAPI) {\n    var observableConfig = assign({}, this.clientConfig, {\n      isPromiseAPI: false\n    });\n    this.observable = new SanityClient(observableConfig);\n  }\n}\n\nassign(SanityClient.prototype, dataMethods);\nassign(SanityClient.prototype, {\n  clone: function clone() {\n    return new SanityClient(this.config());\n  },\n  config: function config(newConfig) {\n    if (typeof newConfig === 'undefined') {\n      return assign({}, this.clientConfig);\n    }\n\n    if (this.observable) {\n      var observableConfig = assign({}, newConfig, {\n        isPromiseAPI: false\n      });\n      this.observable.config(observableConfig);\n    }\n\n    this.clientConfig = initConfig(newConfig, this.clientConfig || {});\n    return this;\n  },\n  withConfig: function withConfig(newConfig) {\n    return this.clone().config(newConfig);\n  },\n  getUrl: function getUrl(uri) {\n    var canUseCdn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var base = canUseCdn ? this.clientConfig.cdnUrl : this.clientConfig.url;\n    return \"\".concat(base, \"/\").concat(uri.replace(/^\\//, ''));\n  },\n  isPromiseAPI: function isPromiseAPI() {\n    return this.clientConfig.isPromiseAPI;\n  },\n  _requestObservable: function _requestObservable(options) {\n    var uri = options.url || options.uri;\n    var canUseCdn = this.clientConfig.useCdn && ['GET', 'HEAD'].indexOf(options.method || 'GET') >= 0 && uri.indexOf('/data/') === 0;\n    var reqOptions = getRequestOptions(this.clientConfig, assign({}, options, {\n      url: this.getUrl(uri, canUseCdn)\n    }));\n    return httpRequest(reqOptions, this.clientConfig.requester);\n  },\n  request: function request(options) {\n    var observable = this._requestObservable(options).pipe(filter(function (event) {\n      return event.type === 'response';\n    }), map(function (event) {\n      return event.body;\n    }));\n\n    return this.isPromiseAPI() ? toPromise(observable) : observable;\n  }\n});\nSanityClient.Patch = Patch;\nSanityClient.Transaction = Transaction;\nSanityClient.ClientError = httpRequest.ClientError;\nSanityClient.ServerError = httpRequest.ServerError;\nSanityClient.requester = httpRequest.defaultRequester;\nmodule.exports = SanityClient;","map":{"version":3,"sources":["/home/anton/Code/portfolio/node_modules/@sanity/client/lib/sanityClient.js"],"names":["assign","require","_require","filter","_require2","map","Patch","Transaction","dataMethods","DatasetsClient","ProjectsClient","AssetsClient","UsersClient","AuthClient","httpRequest","getRequestOptions","_require3","defaultConfig","initConfig","toPromise","observable","SanityClient","config","arguments","length","undefined","assets","datasets","projects","users","auth","clientConfig","isPromiseAPI","observableConfig","prototype","clone","newConfig","withConfig","getUrl","uri","canUseCdn","base","cdnUrl","url","concat","replace","_requestObservable","options","useCdn","indexOf","method","reqOptions","requester","request","pipe","event","type","body","ClientError","ServerError","defaultRequester","module","exports"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar assign = require('object-assign');\n\nvar _require = require('@sanity/observable/operators/filter'),\n    filter = _require.filter;\n\nvar _require2 = require('@sanity/observable/operators/map'),\n    map = _require2.map;\n\nvar Patch = require('./data/patch');\n\nvar Transaction = require('./data/transaction');\n\nvar dataMethods = require('./data/dataMethods');\n\nvar DatasetsClient = require('./datasets/datasetsClient');\n\nvar ProjectsClient = require('./projects/projectsClient');\n\nvar AssetsClient = require('./assets/assetsClient');\n\nvar UsersClient = require('./users/usersClient');\n\nvar AuthClient = require('./auth/authClient');\n\nvar httpRequest = require('./http/request');\n\nvar getRequestOptions = require('./http/requestOptions');\n\nvar _require3 = require('./config'),\n    defaultConfig = _require3.defaultConfig,\n    initConfig = _require3.initConfig;\n\nvar toPromise = function toPromise(observable) {\n  return observable.toPromise();\n};\n\nfunction SanityClient() {\n  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultConfig;\n\n  if (!(this instanceof SanityClient)) {\n    return new SanityClient(config);\n  }\n\n  this.config(config);\n  this.assets = new AssetsClient(this);\n  this.datasets = new DatasetsClient(this);\n  this.projects = new ProjectsClient(this);\n  this.users = new UsersClient(this);\n  this.auth = new AuthClient(this);\n\n  if (this.clientConfig.isPromiseAPI) {\n    var observableConfig = assign({}, this.clientConfig, {\n      isPromiseAPI: false\n    });\n    this.observable = new SanityClient(observableConfig);\n  }\n}\n\nassign(SanityClient.prototype, dataMethods);\nassign(SanityClient.prototype, {\n  clone: function clone() {\n    return new SanityClient(this.config());\n  },\n  config: function config(newConfig) {\n    if (typeof newConfig === 'undefined') {\n      return assign({}, this.clientConfig);\n    }\n\n    if (this.observable) {\n      var observableConfig = assign({}, newConfig, {\n        isPromiseAPI: false\n      });\n      this.observable.config(observableConfig);\n    }\n\n    this.clientConfig = initConfig(newConfig, this.clientConfig || {});\n    return this;\n  },\n  withConfig: function withConfig(newConfig) {\n    return this.clone().config(newConfig);\n  },\n  getUrl: function getUrl(uri) {\n    var canUseCdn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var base = canUseCdn ? this.clientConfig.cdnUrl : this.clientConfig.url;\n    return \"\".concat(base, \"/\").concat(uri.replace(/^\\//, ''));\n  },\n  isPromiseAPI: function isPromiseAPI() {\n    return this.clientConfig.isPromiseAPI;\n  },\n  _requestObservable: function _requestObservable(options) {\n    var uri = options.url || options.uri;\n    var canUseCdn = this.clientConfig.useCdn && ['GET', 'HEAD'].indexOf(options.method || 'GET') >= 0 && uri.indexOf('/data/') === 0;\n    var reqOptions = getRequestOptions(this.clientConfig, assign({}, options, {\n      url: this.getUrl(uri, canUseCdn)\n    }));\n    return httpRequest(reqOptions, this.clientConfig.requester);\n  },\n  request: function request(options) {\n    var observable = this._requestObservable(options).pipe(filter(function (event) {\n      return event.type === 'response';\n    }), map(function (event) {\n      return event.body;\n    }));\n\n    return this.isPromiseAPI() ? toPromise(observable) : observable;\n  }\n});\nSanityClient.Patch = Patch;\nSanityClient.Transaction = Transaction;\nSanityClient.ClientError = httpRequest.ClientError;\nSanityClient.ServerError = httpRequest.ServerError;\nSanityClient.requester = httpRequest.defaultRequester;\nmodule.exports = SanityClient;"]},"metadata":{},"sourceType":"script"}